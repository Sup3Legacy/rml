type 'a t = process {inout s:  (int,bool) event, a: (unit, unit) event;
                     in b: (int, int list) event; out k: ('a,unit) event}
let process p {inout s: (int,bool) event, a;
	       out k; in b: (int, int list) event;} = 
  let s<b> in
  if b then
    emit s 1;
  emit a

let f (x: string t) = x

let p' = f p
