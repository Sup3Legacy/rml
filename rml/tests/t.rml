let process t{} =
  let cpt = ref 1 in
  signal k in
  signal s default 0 gather (+) in
  loop
    cpt := 1;
    do
      loop
	emit s !cpt;
	incr cpt;
	pause
      end
    until k;
    pause
  end
  ||
  loop 
    pause;
    print_int (pre ?s);
    print_newline()
  end
  ||
  pause;
  pause;
  pause;
  emit k
